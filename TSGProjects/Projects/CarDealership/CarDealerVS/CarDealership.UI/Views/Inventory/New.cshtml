@model CarDealership.UI.Models.InventoryVM
@{
    ViewBag.Title = "New Vehicles";
}

<h3>@ViewBag.Message</h3>

<div class="quickSearchBordered">
    <div class="row">
        <div class="col-md-12">
            <p>
                Quick Search
            </p>
        </div>
    </div>
    <div class="row">
        <div class="col-xs-12">
            <form id="searchForm" class="form-inline">
                <div class="form-group">
                    <input type="text" class="form-control" id="SearchTerm" placeholder="Enter make, model, or year">
                </div>
                <div class="form-group">
                    <label for="minRate">Price</label>
                    <input type="text" class="form-control" id="MinPrice" placeholder="Min Price">
                </div>
                <div class="form-group">
                    <input type="text" class="form-control" id="MaxPrice" placeholder="Max Price">
                </div>
                <div class="form-group">
                    <label for="city">Year</label>
                    <input type="text" class="form-control" id="MinYear" placeholder="Min Year">
                </div>
                <div class="form-group">
                    <input type="text" class="form-control" id="MaxYear" placeholder="Max Year">
                </div>
                <button id="btnSearch" class="btn btn-default">Search</button>
            </form>
        </div>
    </div>
</div>
<div class="row">
    <h3>Search Results</h3>
    <div id="searchResults" class="col-md-12">
    </div>
</div>




@section Scripts
{
    @*<script>
        $(document).ready(function () {
                $("#searchForm").submit(function (e) {
                    search();
                    return false;
                });
            });

            function search() {
                var params;
                var imagePath = '@Url.Content("~/Images/")';
                var detailsPath = '@Url.Action("Details", "Inventory")/';

                params = 'SearchTerm=' + $('#SearchTerm').val();
                params += '&MinPrice=' + $('#MinPrice').val();
                params += '&MaxPrice=' + $('#MaxPrice').val();
                params += '&MinYear=' + $('#MinYear').val();
                params += '&MaxYear=' + $('#MaxYear').val();
                $.ajax({
                    type: 'GET',
                    url: 'http://localhost:44396/api/Inventory/New?' + params,
                    async: false,
                    cache: false,
                    success: function (results) {
                        $('#searchResults').empty();

                        $.each(results, function (index, vehicle) {
                            var html =
                                '<div class="row" id="bordered">' +
                                '<div class="col-md-3"><p><strong>' + vehicle.VehicleYear + ' ' + vehicle.VehicleModel.Make.MakeName + ' ' + vehicle.VehicleModel.ModelName + '</strong></p>' +
                                '<p><img src="' + imagePath + vehicle.VehicleImageFile + '" /></p></div>' +
                                '<div class="col-md-3"><p><strong>Body Style: </strong>' + vehicle.Body.BodyStyle + '</p>' + '<p><strong>Transmission: </strong>' + vehicle.Transmission.TransmissionType + '</p>' + '<p><strong>Color: </strong>' + vehicle.Color.ColorName + '</p></div>' +
                                '<div class="col-md-3"><p><strong>Interior: </strong>' + vehicle.InteriorColor.InteriorColorName + '</p>' + '<p><strong>Mileage: </strong>' + vehicle.Mileage + '</p>' + '<p><strong>VIN #: </strong>' + vehicle.VinNumber + '</p></div>' +
                                '<div class="col-md-3"><p><strong>Sale Price: </strong>' + vehicle.SalePrice + '</p>' + '<p><strong>MSRP: </strong>' + vehicle.MSRP + '</p>' + '<a href="' + detailsPath + vehicle.VehicleID + '"><button class="btn btn-primary">Details</button></a></div>' +
                                '</div>';

                            $('#searchResults').append(html.toString());
                        });

                    },
                    error: function () {
                        alert('Search result not found!')
                    }
                });
            }

    </script>*@
    @Scripts.Render("~/bundles/jquery")
    @Scripts.Render("~/Scripts/SiteNew.js")
}